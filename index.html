<!DOCTYPE html>
<html lang="id">
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jastip Yanoshi</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* ----- General Styling & Color Palette from Calculator ----- */
        :root {
            --primary-blue: #076eb3;
            --accent-orange: #f0a92d;
            --light-gray: #f4f7f9;
            --dark-gray: #333;
            --white: #ffffff;
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            --border-radius: 12px;
            --grid-item-bg: rgba(7, 110, 179, 0.05); /* Adjusted for new theme */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--white);
            color: var(--dark-gray);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* Animated Background Gradient */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(45deg, #e6f7ff, #fdf8e1, #e6f7ff, #fdf8e1);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        main {
            padding: 20px;
            max-width: 800px; /* Wider for better layout */
            margin: 0 auto;
        }

        h2, h3 {
            text-align: center;
            font-size: 1.5rem;
            letter-spacing: 1px;
            margin: 25px 0 15px 0;
            color: var(--primary-blue);
            font-weight: 700;
        }
        
        /* ----- Header & Navigation (New Style) ----- */
        .header {
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 5%;
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            z-index: 1000;
            animation: slideDown 0.7s ease-out;
            height: auto;
        }

        .logo img {
            height: 45px;
            transition: transform 0.3s ease;
        }
        .logo img:hover {
            transform: scale(1.1);
        }

        .header-right {
            display: flex;
            align-items: center;
        }

        .contact-btn-header {
            background: linear-gradient(45deg, var(--accent-orange), #ffc107);
            color: var(--white);
            padding: 0.7rem 1.5rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(240, 169, 45, 0.4);
        }
        .contact-btn-header:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(240, 169, 45, 0.6);
        }
        
        /* ----- Image Slider ----- */
        .slider-container {
            position: relative; overflow: hidden; width: 100%;
            border-radius: var(--border-radius); aspect-ratio: 16 / 9;
            margin-bottom: 30px; box-shadow: var(--shadow);
        }
        .slider { display: flex; transition: transform 0.5s ease-in-out; cursor: grab; height: 100%; }
        .slide { min-width: 100%; }
        .slide img { width: 100%; display: block; aspect-ratio: 16 / 9; object-fit: cover; }

        /* ----- Grid Section (New Style) ----- */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        .grid-item {
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            text-align: center;
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        .grid-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        .icon-container {
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }
        .icon-container img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .grid-item h4 {
            margin: 0; color: var(--primary-blue); font-size: 1.0rem;
            font-weight: 600; line-height: 1.3;
        }
        .calculator-button-item {
            grid-column: 1 / -1; 
            background: transparent; 
            padding: 0;
            box-shadow: none;
            border-radius: 0;
        }

        .calculator-button-item img {
            opacity: 1;
            width: 100%;
            height: auto;
            display: block;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .calculator-button-item:hover img {
            transform: scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        
        .calculator-button-item:hover {
            transform: none; /* Reset transform on container */
            box-shadow: none; /* Reset shadow on container */
        }

        /* ----- Universal Modal Styling (from Calculator) ----- */
        .modal {
            position: fixed; z-index: 2000; left: 0; top: 0;
            width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6);
            display: flex;
            justify-content: center; align-items: center;
            opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, visibility 0s 0.3s;
        }
        .modal.visible {
            opacity: 1; visibility: visible;
            transition: opacity 0.3s ease;
        }
        .modal-content {
            background-color: var(--white);
            padding: 2rem;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow);
            transform: scale(0.95);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-height: 90vh;
            display: flex;
            flex-direction: column;
        }
        .modal.visible .modal-content {
            transform: scale(1);
        }
        .modal-content h3, .modal-content h2 {
             color: var(--primary-blue); margin-bottom: 1.5rem;
             margin-top: 0; flex-shrink: 0; text-align: center;
        }
        .modal-body {
            overflow-y: auto; margin-bottom: 1.5rem;
            padding-right: 10px;
        }
        .modal-body ul { list-style-position: inside; padding-left: 10px; }
        .modal-body li { margin-bottom: 10px; }
        .modal-body p { margin-bottom: 15px; }
        .modal-body strong { color: var(--primary-blue); }
        .modal-close-btn {
            background-color: var(--accent-orange); color: white; border: none;
            padding: 0.8rem 2rem; border-radius: 50px; cursor: pointer;
            font-weight: 600; transition: all 0.3s ease;
            flex-shrink: 0; align-self: center;
        }
        .modal-close-btn:hover {
            opacity: 0.9; transform: scale(1.05);
        }

        /* ----- Chat Modal Specifics ----- */
        .chat-history { min-height: 300px; max-height: 50vh; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; padding: 10px; margin-bottom: 20px; border-bottom: 1px solid #eee; }
        #faq-select { width: 100%; padding: 15px; border-radius: 8px; border: 2px solid #ddd; font-size: 1rem; background-color: #f9f9f9; cursor: pointer; -webkit-appearance: none; -moz-appearance: none; appearance: none; background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20width%3D%27292.4%27%20height%3D%27292.4%27%3E%3Cpath%20fill%3D%27%23076eb3%27%20d%3D%27M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%27%2F%3E%3C%2Fsvg%3E"); background-repeat: no-repeat; background-position: right 15px top 50%; background-size: 14px; font-weight: 600; font-family: 'Poppins', sans-serif; }
        .chat-bubble { font-size: 0.95rem; padding: 10px 15px; border-radius: 18px; max-width: 85%; line-height: 1.5; word-wrap: break-word; }
        .chat-bubble.question { background-color: #e9e9e9; color: #333; align-self: flex-end; border-bottom-right-radius: 5px; }
        .chat-bubble.answer { background-color: var(--primary-blue); color: var(--white); align-self: flex-start; border-bottom-left-radius: 5px; }
        .typing-indicator { padding: 10px 15px; border-radius: 18px; display: flex; align-items: center; align-self: flex-start; background-color: var(--primary-blue); }
        .typing-indicator span { height: 8px; width: 8px; background-color: rgba(255, 255, 255, 0.7); border-radius: 50%; display: inline-block; margin: 0 2px; animation: bounce 1.2s infinite; }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes bounce { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-8px); } }

        /* ----- Styles for Calculator Form inside Modal ----- */
        .calculator-card { padding: 0; box-shadow: none; animation: none; }
        .calculator-card h1 { color: var(--primary-blue); text-align: center; margin-bottom: 1.7rem; font-size: 1.8rem; font-weight: 700; }
        .form-group { margin-bottom: 1.5rem; position: relative; }
        .form-group label { display: block; color: var(--primary-blue); font-weight: 600; margin-bottom: 0.5rem; font-size: 0.9rem;}
        .form-group input, .form-group select { width: 100%; padding: 0.8rem 1rem; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem; font-family: 'Poppins', sans-serif; transition: all 0.3s ease; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: var(--accent-orange); box-shadow: 0 0 0 3px rgba(240, 169, 45, 0.2); }
        .form-group input[readonly] { background-color: var(--light-gray); cursor: not-allowed; }
        .dropdown { position: relative; }
        .dropdown-content { display: none; position: absolute; background-color: var(--white); min-width: 100%; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 2001; max-height: 150px; overflow-y: auto; border-radius: 8px; border: 1px solid #eee; margin-top: 5px; }
        .dropdown-content a { color: var(--dark-gray); padding: 12px 16px; text-decoration: none; display: block; transition: background-color 0.2s ease; }
        .dropdown-content a:hover { background-color: var(--light-gray); color: var(--primary-blue); }
        .calculate-btn { width: 100%; padding: 1rem; border: none; border-radius: 8px; background: linear-gradient(45deg, var(--primary-blue), #0a84e0); color: white; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; margin-top: 1rem; box-shadow: 0 4px 15px rgba(7, 110, 179, 0.4); }
        .calculate-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(7, 110, 179, 0.6); }
        ::placeholder { color: #999; font-size: 0.8rem; font-style: italic; }

        /* ----- Styles for Calculator RESULT Modal ----- */
        .result-detail { text-align: left; margin-bottom: 1.5rem; }
        .result-detail p { display: flex; justify-content: space-between; padding: 0.8rem 0; border-bottom: 1px solid #eee; font-size: 1rem; }
        .result-detail p:last-child { border-bottom: none; }
        .result-detail p span:first-child { font-weight: 600; color: #555; }
        .result-detail p span:last-child { font-weight: 600; color: var(--primary-blue); }
        .total-biaya { background-color: var(--light-gray); padding: 1rem; border-radius: 8px; }
        .total-biaya p { display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: 700; border: none; padding: 0; }
        .total-biaya p span:first-child { color: var(--primary-blue); }
        .total-biaya p span:last-child { color: var(--accent-orange); }
        .box-note { font-size: 0.85rem; color: #555; background-color: #fff9e6; border-left: 4px solid var(--accent-orange); padding: 0.75rem; border-radius: 4px; margin: 1.5rem 0 1rem 0; text-align: left; }
        .image-container { margin-bottom: 1rem; text-align: center; }
        .image-container img { max-width: 100%; height: auto; border-radius: 8px; border: 1px solid #eee; cursor: zoom-in; transition: transform 0.2s ease; }
        .image-container img:hover { transform: scale(1.05); }
        .tax-note { font-size: 0.8rem; color: #888; font-style: italic; margin-bottom: 1.5rem; flex-shrink: 0; text-align: center; }

        /* ----- Image Viewer (Lightbox) ----- */
        .image-viewer-modal {
            position: fixed; z-index: 3000; left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.85); display: flex; justify-content: center; align-items: center;
            opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0s 0.3s;
        }
        .image-viewer-modal.visible { opacity: 1; visibility: visible; transition: opacity 0.3s ease; }
        .image-viewer-close { position: absolute; top: 20px; right: 35px; color: #fff; font-size: 40px; font-weight: bold; cursor: pointer; transition: color 0.3s; }
        .image-viewer-close:hover { color: #bbb; }
        .zoomed-image { max-width: 90%; max-height: 90%; object-fit: contain; animation: zoomInAnimation 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        
        /* ----- Promo & Link Section (New Style) ----- */
        .single-promo img, .link-image img {
            max-width: 100%; height: auto; border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }
        .link-images-container {
            display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;
        }
        .link-image a {
            display: block; text-decoration: none; border-radius: var(--border-radius);
            overflow: hidden; box-shadow: var(--shadow); transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .link-image a:hover {
            transform: translateY(-8px); box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        .link-image img { width: 100%; display: block; }
        
        /* ----- Social Media Section ----- */
        .social-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .social-embed { text-align: center; border-radius: var(--border-radius); overflow: hidden; box-shadow: var(--shadow); }
        .social-button { display: block; background-color: var(--primary-blue); color: var(--white); padding: 12px; text-decoration: none; font-weight: 600; transition: background-color 0.3s; }
        .social-button:hover { background-color: #0d3b5a; }
        .social-embed iframe { width: 100%; height: 500px; border: none; display: block; }

        /* ----- Contact Button (New Style) ----- */
        .contact-section { text-align: center; margin: 40px 0; }
        .contact-admin-btn {
            display: inline-block;
            background: linear-gradient(45deg, var(--accent-orange), #ffc107);
            color: var(--white); padding: 1rem 2.5rem;
            border-radius: 50px; font-size: 1.2rem;
            font-weight: 700; text-decoration: none;
            box-shadow: 0 4px 20px rgba(240, 169, 45, 0.5);
            transition: all 0.3s ease;
        }
        .contact-admin-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(240, 169, 45, 0.7);
        }

        /* ----- Animations ----- */
        .fade-in-section { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .fade-in-section.is-visible { opacity: 1; transform: translateY(0); }
        @keyframes slideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }
        @keyframes zoomInAnimation { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        /* ----- Responsive Design ----- */
        @media (max-width: 768px) {
            h3 { font-size: 1.2rem; }
            .grid-container { grid-template-columns: repeat(3, 1fr); }
            .social-container { grid-template-columns: 1fr; }
            .grid-item { padding: 15px 10px; }
            .icon-container { width: 70px; height: 70px; margin-bottom: 10px; }
            .grid-item h4 { font-size: 0.6rem; font-weight: 600; }
        }
        @media (max-width: 480px) {
            h3 { font-size: 1.2rem; }
            .header { padding: 0.8rem 1rem; }
            .logo img { height: 35px; }
            .contact-btn-header { font-size: 0.8rem; padding: 0.5rem 1rem; }
            .grid-container { grid-template-columns: repeat(3, 1fr); }
            .grid-item { padding: 15px 10px; }
            .icon-container { width: 70px; height: 70px; margin-bottom: 10px; }
            .grid-item h4 { font-size: 0.6rem; }
            .link-images-container, .social-container { gap: 15px; }
            .modal-content { padding: 1.5rem; }
            .calculator-button-item h4 { font-size: 1.1rem; }
        }
        .jastip-title {
            letter-spacing: -1px;
        }
        
        /**************************************************/
        /* -- MULAI: STYLE KHUSUS UNTUK GAME             -- */
        /**************************************************/

        #game-button-container {
            text-align: center;
            padding: 20px 0 40px 0;
        }

        #open-game-btn {
            background: linear-gradient(45deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            font-family: 'Poppins', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        #open-game-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .game-modal {
            position: fixed;
            z-index: 9999; /* Pastikan di atas segalanya */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0s 0.3s;
        }

        .game-modal.visible {
            opacity: 1;
            visibility: visible;
        }
        
        /* Menggunakan style game di sini */
        #game-container {
            width: 100%; max-width: 400px; aspect-ratio: 9 / 16; position: relative;
            background: linear-gradient(45deg, #e6f7ff, #fdf8e1, #e6f7ff, #fdf8e1);
            background-size: 400% 400%;
            animation: animateGradient 15s ease infinite;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1); display: flex; flex-direction: column;
            overflow: hidden; border: 1px solid var(--border-color);
            transform: scale(0.95);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .game-modal.visible #game-container {
            transform: scale(1);
        }

        #info-bar {
            padding: 10px; text-align: center; font-size: 1.5em; font-weight: bold;
            background-color: transparent; border-bottom: 2px solid var(--border-color);
            flex-shrink: 0;
        }
        #score-display::before { content: 'Skor: '; }
        #canvas-wrapper { height: 85%; width: 100%; background-color: transparent; }
        canvas { width: 100%; height: 100%; display: block; }
        #controls {
            height: 15%; width: 100%; background-color: rgba(240, 240, 240, 0.7);
            display: flex; justify-content: center; align-items: center;
            border-top: 2px solid var(--border-color);
            backdrop-filter: blur(4px);
        }
        #drop-button {
            padding: 15px 50px; font-size: 1.5em; font-weight: bold; color: white;
            background-color: var(--accent-color); border: none; border-radius: 12px;
            cursor: pointer; transition: background-color 0.3s, transform 0.1s;
        }

        #game-container .overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(255, 255, 255, 0.8); display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
            color: var(--text-color); z-index: 10;
            backdrop-filter: blur(4px);
        }

        #game-container .button {
             padding: 15px 30px; font-size: 1.2em; font-weight: bold; color: #fff;
            background-color: var(--danger-color); border: none; border-radius: 10px;
            cursor: pointer; transition: background-color 0.3s;
        }

        .hidden { display: none; }

        @keyframes animateGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        /**************************************************/
        /* -- SELESAI: STYLE KHUSUS UNTUK GAME           -- */
        /**************************************************/

    </style>
</head>
<body>

    <header class="header">
        <div class="logo">
            <a href="#"><img src="https://yanoshijapan.github.io/jastip/jastip%202.png" alt="Logo Jastip"></a>
        </div>
        <div class="header-right">
            <a href="https://wa.me/6281315431551?text=halo%20min!,%20mau%20ikutan%20Jastipnya%20dong" target="_blank" class="contact-btn-header">Kontak Admin</a>
        </div>
    </header>

    <main class="container">
        <section class="slider-container fade-in-section">
            <div class="slider">
                <div class="slide"><img src="https://yanoshijapan.github.io/jastip/banner1.jpg" alt="Promo 1"></div>
                <div class="slide"><img src="https://yanoshijapan.github.io/jastip/banner2.jpg" alt="Promo 2"></div>
                <div class="slide"><img src="https://yanoshijapan.github.io/jastip/banner3.jpg" alt="Promo 3"></div>
            </div>
        </section>

        <section class="grid-container fade-in-section">
            <div class="grid-item" data-modal-id="modal1">
                <div class="icon-container"><img src="https://yanoshijapan.github.io/jastip/icon1.png" alt="Tentang Jastip Yanoshi"></div>
                <h4>Tentang Jastip Yanoshi</h4>
            </div>
            <div class="grid-item" data-modal-id="modal2">
                <div class="icon-container"><img src="https://yanoshijapan.github.io/jastip/icon2.png" alt="Kenapa Yanoshi"></div>
                <h4>Kenapa Harus Yanoshi</h4>
            </div>
            <div class="grid-item" data-modal-id="modal3">
                <div class="icon-container"><img src="https://yanoshijapan.github.io/jastip/icon3.png" alt="Ketentuan Barang"></div>
                <h4>Ketentuan Barang Bawaan</h4>
            </div>
            <div class="grid-item" data-modal-id="modal4">
                <div class="icon-container"><img src="https://yanoshijapan.github.io/jastip/icon4.png" alt="Daftar Harga"></div>
                <h4>Daftar Harga Jastip</h4>
            </div>
            <div class="grid-item" data-modal-id="modal5">
                <div class="icon-container"><img src="https://yanoshijapan.github.io/jastip/icon5.png" alt="Jadwal"></div>
                <h4>Jadwal Jastip</h4>
            </div>
            <div class="grid-item" data-modal-id="modal6">
                <div class="icon-container"><img src="https://yanoshijapan.github.io/jastip/icon6.png" alt="Tanya Jawab"></div>
                <h4>Tanya Jawab Interaktif</h4>
            </div>
            <div class="grid-item calculator-button-item" data-modal-id="calculator-modal-form">
                <img src="https://yanoshijapan.github.io/asetonline/btncal.png" alt="Tombol Kalkulator Biaya Jastip">
            </div>
        </section>

        <div class="fade-in-section">
            <h3 class="jastip-title">Klik tombol di bawah<br>untuk daftar Jastip!</br></h3>
            <section class="link-images-container">
                <div class="link-image">
                    <a href="https://yanoshijapan.github.io/jastipindojepang/" target="_blank">
                        <img src="https://yanoshijapan.github.io/jastip/idjp.png" alt="Jastip Indo - Jepang">
                    </a>
                </div>
                <div class="link-image">
                    <a href="https://yanoshijapan.github.io/jastipjepangindo/" target="_blank">
                        <img src="https://yanoshijapan.github.io/jastip/jpid.png" alt="Jastip Jepang - Indo">
                    </a>
                </div>
            </section>
        </div>

        <section class="contact-section fade-in-section">
            <a href="https://wa.me/6281315431551?text=halo%20min!,%20mau%20ikutan%20Jastipnya%20dong" target="_blank" class="contact-admin-btn">
                Hubungi Admin, Klik Disini
            </a>
        </section>

        <div class="fade-in-section">
            <h3 class="jastip-title">Follow Sosmed Kami</h3>
            <section class="social-container">
                <div class="social-embed">
                    <a href="https://www.instagram.com/yanoshi_jastip" target="_blank" class="social-button">Instagram</a>
                    <iframe src="https://www.instagram.com/p/C9z5X_xS_qS/embed" frameborder="0" scrolling="no" allowtransparency="true"></iframe>
                </div>
                <div class="social-embed">
                    <a href="https://www.tiktok.com/@jastip_yanoshi" target="_blank" class="social-button">TikTok</a>
                    <iframe src="https://www.tiktok.com/embed/v2/7393730230302821639" title="TikTok video player" frameborder="0" allow="encrypted-media;" allowfullscreen scrolling="no"></iframe>
                </div>
            </section>
        </div>

        <div class="fade-in-section">
            <h3 class="jastip-title">Beli oleh-oleh Jepang online,<br>klik gambar dibawah ini ya!</br></h3>
            <section class="single-promo">
                <a href="https://yanoshistore.netlify.app/" target="_blank">
                    <img src="https://yanoshijapan.github.io/jastip/belio.jpg" alt="Promo Final">
                </a>
            </section>
        </div>
        
        <section class="game-button-container fade-in-section">
            <button id="open-game-btn">ðŸŽ® Bosan? Main game dulu yuk!</button>
        </section>

    </main>
    
    <div id="modal1" class="modal"><div class="modal-content"><h3></h3><div class="modal-body"></div><button class="modal-close-btn">Tutup</button></div></div>
    <div id="modal2" class="modal"><div class="modal-content"><h3></h3><div class="modal-body"></div><button class="modal-close-btn">Tutup</button></div></div>
    <div id="modal3" class="modal"><div class="modal-content"><h3></h3><div class="modal-body"></div><button class="modal-close-btn">Tutup</button></div></div>
    <div id="modal4" class="modal"><div class="modal-content"><h3></h3><div class="modal-body"></div><button class="modal-close-btn">Tutup</button></div></div>
    <div id="modal5" class="modal"><div class="modal-content"><h3></h3><div class="modal-body"></div><button class="modal-close-btn">Tutup</button></div></div>
    <div id="modal6" class="modal"><div class="modal-content"><h3>Tanya Jawab Interaktif</h3><div class="modal-body"><div class="chat-history"></div><select id="faq-select"><option value="" disabled selected>Pilih pertanyaannya disini...</option></select></div><button class="modal-close-btn">Tutup</button></div></div>
    <div id="calculator-modal-form" class="modal"><div class="modal-content"><div class="calculator-card"><form id="jastip-form" onsubmit="return false;"></form></div><button class="modal-close-btn" style="margin-top:20px;">Tutup</button></div></div>
    <div id="result-modal" class="modal"><div class="modal-content"><h2>Detail Biaya Jastip</h2><div class="modal-body"><div class="result-detail"><p><span>Harga Jastip</span> <span id="harga-jastip-result"></span></p><p><span>Estimasi Ongkir</span> <span id="biaya-ongkir-result"></span></p></div><div class="total-biaya"><p><span>TOTAL BIAYA</span> <span id="total-biaya-result"></span></p></div><p class="box-note">Harga di atas belum termasuk box kirim Yamato, harga box disesuaikan dari berat dan dimensi barang.</p><div class="image-container"><img id="box-image" src="https://yanoshijapan.github.io/asetonline/boxs.png" alt="Ukuran Box Yamato"></div></div><p class="tax-note">Harga belum termasuk tax 10% dari Yamato Bandara Narita.</p><button class="modal-close-btn">Tutup</button></div></div>
    <div id="image-viewer" class="image-viewer-modal"><span class="image-viewer-close">&times;</span><img id="zoomed-image" class="zoomed-image"></div>
    
    <div id="game-modal" class="game-modal">
        <div id="game-container">
            <div id="info-bar"><span id="score-display">0</span></div>
            <div id="canvas-wrapper"><canvas id="gameCanvas"></canvas></div>
            <div id="controls"><button id="drop-button">JATUHKAN</button></div>
            <div id="start-screen" class="overlay">
                <h1>Drop n Drop</h1>
                <p>Atur posisi barang, lalu jatuhkan untuk menggabungkannya!</p>
                <button id="start-game-btn" class="button" style="background-color: #28a745;">Mulai Game</button>
            </div>
            <div id="game-over-screen" class="overlay hidden">
                <h1>Game Over</h1>
                <p>Skor Akhir: <span id="final-score">0</span></p>
                <button id="restart-game-btn" class="button">Coba Lagi</button>
            </div>
        </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Slider Logic ---
        const sliderContainer = document.querySelector('.slider-container');
        if (sliderContainer) {
            const slider = sliderContainer.querySelector('.slider');
            let slides = Array.from(slider.children);

            if (slides.length > 1) {
                const firstClone = slides[0].cloneNode(true);
                const lastClone = slides[slides.length - 1].cloneNode(true);
                slider.appendChild(firstClone);
                slider.insertBefore(lastClone, slides[0]);
                slides = Array.from(slider.children);

                let currentIndex = 1;
                const slideWidth = () => slides[0].getBoundingClientRect().width;

                const updateSliderPosition = (withTransition = true) => {
                    slider.style.transition = withTransition ? 'transform 0.5s ease-in-out' : 'none';
                    slider.style.transform = `translateX(-${slideWidth() * currentIndex}px)`;
                }

                updateSliderPosition();

                const moveToNextSlide = () => {
                    if (currentIndex >= slides.length - 1) return;
                    currentIndex++;
                    updateSliderPosition();
                };

                let slideInterval = setInterval(moveToNextSlide, 3000);

                slider.addEventListener('transitionend', () => {
                    if (currentIndex === slides.length - 1) {
                        currentIndex = 1;
                        updateSliderPosition(false);
                    }
                    if (currentIndex === 0) {
                        currentIndex = slides.length - 2;
                        updateSliderPosition(false);
                    }
                });

                sliderContainer.addEventListener('mouseenter', () => clearInterval(slideInterval));
                sliderContainer.addEventListener('mouseleave', () => slideInterval = setInterval(moveToNextSlide, 3000));
                window.addEventListener('resize', () => updateSliderPosition(false));
            }
        }

        // --- Generic Modal Logic ---
        const gridItems = document.querySelectorAll('.grid-item');
        const modals = document.querySelectorAll('.modal');
        const closeButtons = document.querySelectorAll('.modal-close-btn');

        const modalData = {
            modal1: { title: "Tentang Jastip Yanoshi", content: "<p>Hai para pejuang barang impian! Kenalan yuk sama Yanoshi Jastip, solusi jastip paling asyik dan terpercaya buat kamu yang butuh kirim-kirim barang dari Jepang ke Indonesia atau sebaliknya.<br><br><strong>Buat yang lagi di Jepang:</strong> Lagi kangen masakan rumah tapi bumbu nggak ada? Butuh skincare kesayangan atau obat-obatan penting dari Indonesia? Atau dokumen yang ketinggalan? Tenang, nggak perlu terbang pulang! Yanoshi siap bawain semua itu langsung ke Jepang. Pulang ke Indonesia bawaan numpuk? Aduh, jangan pusing! Titipin aja barang-barangmu, mulai dari baju, elektronik, sampai oleh-oleh Jepang yang super banyak itu. Kami yang urus antar sampai alamat di Indonesia.<br><br><strong>Buat yang di Indonesia:</strong> Ngiler sama produk Jepang terbaru tapi mager ke sana? Tenang aja! Yanoshi hadir buat bikin belanjamu makin gampang. Tinggal tunjuk, kami yang datangkan barangnya dari Jepang ke rumahmu. Gampang kan?.</p>" },
            modal2: { title: "Kenapa Harus Jastip di Yanoshi?", content: "<ul><li><strong>Cepat:</strong> Karena kami bawa sendiri alias handcarry, barangmu bakal sampai di pelukanmu lebih cepat dari kirim kargo.</li><li><strong>Aman & Terpercaya:</strong> Kamu nitip di Yanoshi Jastip? Itu artinya kamu kasih kepercayaan penuh ke kami. Tenang aja, barangmu dijaga banget biar sampai dengan selamat sentosa.</li><li><strong>Transparan:</strong> Nggak perlu khawatir ada biaya siluman! Semua rincian jelas di awal, tanpa drama dan tanpa ada yang disembunyikan.</li><li><strong>Komunikatif:</strong> Butuh info atau ada pertanyaan? CS kami responsif dan siap bantu kamu kapan aja, sampai barangmu tiba di tujuan.</li></ul>" },
            modal3: { title: "Barang apa aja sih yang bisa di Jastipin?", content: "<ul><li>Skincare & Kosmetik</li><li>Snack & Makanan Kering</li><li>Bumbu Masakan</li><li>Obat-Obatan Legal</li><li>Dokumen & Surat-Surat</li><li>Perlengkapan Pribadi</li><li>Perlengkapan Olahraga</li><li>Fashion & Aksesoris</li><li>Action Figure & Merchandise Anime</li><li>Barang Elektronik, Rokok & Vape (konsultasi ke CS terlebih dahulu ya)</li></ul><p style='margin-top:1em;'>Kita gak nerima barang ilegal, mudah terbakar, atau yang dilarang oleh peraturan bea cukai ya.</p>" },
            modal4: { title: "Price List Jastip", content: "<ul><li><strong>Barang biasa:</strong> 1.500 yen/kg.</li><li><strong>Handphone (All brand):</strong> 2.000 yen/unit.</li><li><strong>Laptop, tablet (All brand):</strong> 1.500 yen/kg.</li><li><strong>Rokok:</strong> 2.000 yen/slop.</li><li><strong>Rokok elektrik (Vape/Pod):</strong> 1.000 yen/unit.</li><li><strong>Liquid rokok elektrik:</strong> 500 yen/unit.</li><li><strong>Sepatu dengan box:</strong> 2.000 yen/pasang.</li><li><strong>Sepatu tanpa box:</strong> 1.500 yen/pasang.</li></ul><p style='margin-top:1em; font-size: smaller;'>Harga belum termasuk ongkos kirim barang ke basecamp.</p>" },
            modal5: { title: "Jadwal Keberangkatan", content: "<p><strong>Jadwal bulan September:</strong></p><ul><li><strong>Indonesia > Jepang:</strong> 21 September 2025</li><li><strong>Jepang > Indonesia:</strong> 27 September 2025</li></ul><br><p><strong>Jadwal bulan Oktober:</strong></p><ul><li><strong>Batch 1 :</strong><ul><li><strong>Indonesia > Jepang:</strong> 16 Oktober 2025</li><li><strong>Jepang > Indonesia:</strong> 22 Oktober 2025</li></ul></li><li><strong>Batch 2 :</strong><ul><li><strong>Indonesia > Jepang:</strong> 28 Oktober 2025</li></ul></li></ul><br><p><strong>Jadwal bulan November:</strong></p><ul><li><strong>Jepang > Indonesia:</strong> 4 November 2025</li></ul>" }
        };

        function populateModal(modalId, data) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.querySelector('h3').textContent = data.title;
                modal.querySelector('.modal-body').innerHTML = data.content;
            }
        }
        for (const key in modalData) { populateModal(key, modalData[key]); }
        
        gridItems.forEach(item => {
            item.addEventListener('click', () => {
                const modalId = item.getAttribute('data-modal-id');
                const modalToOpen = document.getElementById(modalId);
                if (modalToOpen) {
                    if (modalId === 'modal6') initializeChat(); // Special case for FAQ
                    modalToOpen.classList.add('visible');
                }
            });
        });

        function closeAllModals() {
            modals.forEach(modal => modal.classList.remove('visible'));
        }
        
        closeButtons.forEach(button => button.addEventListener('click', closeAllModals));
        modals.forEach(modal => {
            modal.addEventListener('click', (event) => {
                if (event.target === modal) closeAllModals();
            });
        });

        // --- FAQ Chat Logic ---
        const qaData = [
            { question: "Minat nih kak, terus saya harus apa?", answer: "Kakak cukup isi formnya aja, klik tombol join jastip indo-jepang buat ikut jastip dari indonesia ke jepang, atau tombol join jastip jepang-indo buat ikut jastip dari jepang ke indonesia." },
            { question: "Kalo udah isi form terus gimana lagi kak?", answer: "Kalo udah isi form kakak bisa konfirmasi ke CS kita, klik aja tombol hubungi CS kami, terus kakak chat aja 'kak saya udah isi form ya', nanti biar admin kita bisa verifikasi data kakak." },
            { question: "Bisa tolong belanjain barang dari Jepang?", answer: "Bisa kak, di formnya nanti cukup di tandain 'ya' aja ya di bagian 'ada yang perlu di belanjakan', nanti kakak bisa isi barang apa yang mau di belanjain, semisal sepatu, elektronik atau jajanan Jepang, kalo udah nanti kakak konfirmasi ke CS terus kakak bisa DP atau pembayaran awal biar bisa kita belanjain pas di Jepang." },
            { question: "Barang apa yang gak boleh dibawa?", answer: "Yang gak boleh dibawa itu kaya daging-dagingan, buah-buahan, sayur-sayuran, biji-bijian, tanaman maupun bibit tanaman, beras, makanan olahan daging kaya bakso, bakso aci dan sejenisnya, serta cemilan yang terbuat dari hewan atau jeroan kaya usus dan sejenisnya, serta makanan yang di bungkusnya ada gambar atau nama yang mengandung hewani." },
            { question: "Berapa lama pengirimannya?", answer: "Karena kita bawa sendiri (handcarry), barang bakal sampai lebih cepat. Biasanya sesuai dengan jadwal keberangkatan kami. Semisal kita berangkat tanggal 5 pagi dan direct flight, maka tanggal 5 sore pas kita sampai di negara tujuan, barang langsung kita kirim di hari itu juga pakai pengiriman domestik." }
        ];
        const faqModal = document.getElementById('modal6');
        const chatHistory = faqModal.querySelector('.chat-history');
        const faqSelect = faqModal.querySelector('#faq-select');
        
        function addBubble(text, type) { const bubble = document.createElement('div'); bubble.className = `chat-bubble ${type}`; bubble.innerHTML = text; chatHistory.appendChild(bubble); chatHistory.scrollTop = chatHistory.scrollHeight; }
        
        function initializeChat() {
            chatHistory.innerHTML = ''; faqSelect.innerHTML = '<option value="" disabled selected>Pilih pertanyaannya disini...</option>'; addBubble("Halo kak! Ada yang mau ditanyain? Silakan pilih pertanyaan dari menu di bawah ini ya.", 'answer');
            qaData.forEach((item, index) => { const option = document.createElement('option'); option.value = index; option.textContent = item.question; faqSelect.appendChild(option); });
        }
        
        faqSelect.addEventListener('change', (event) => {
            const selectedIndex = event.target.value;
            if (selectedIndex === "") return;
            const selectedQA = qaData[selectedIndex];
            addBubble(selectedQA.question, 'question');
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'typing-indicator'; typingIndicator.innerHTML = '<span></span><span></span><span></span>'; chatHistory.appendChild(typingIndicator); chatHistory.scrollTop = chatHistory.scrollHeight;
            setTimeout(() => { chatHistory.removeChild(typingIndicator); addBubble(selectedQA.answer, 'answer'); }, 1200);
        });

        // --- Scroll Animation Logic ---
        const sections = document.querySelectorAll('.fade-in-section');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) entry.target.classList.add('is-visible');
            });
        }, { threshold: 0.1 });
        sections.forEach(section => observer.observe(section));

        // --- <<<<<<<<<<<<<<<<<<<< START: CALCULATOR LOGIC INTEGRATION >>>>>>>>>>>>>>>>>>>> ---
        const jastipForm = document.getElementById('jastip-form');
        // Inject the calculator form HTML
        jastipForm.innerHTML = `
            <h1>Kalkulator Jastip</h1>
            <div class="form-group">
                <label for="item-type">Barang apa yang mau di jastip?</label>
                <select id="item-type" name="item-type" required>
                    <option value="" disabled selected>-- Pilih Jenis Barang --</option>
                    <option value="biasa">Barang Biasa (Baju, Makanan, Skincare, dll)</option>
                    <option value="handphone">Handphone</option>
                    <option value="laptop">Laptop atau Tablet</option>
                    <option value="rokok">Rokok</option>
                    <option value="rokok-elektrik">Rokok Elektrik</option>
                    <option value="liquid">Liquid Rokok Elektrik</option>
                    <option value="sepatu-box">Sepatu dengan Box</option>
                    <option value="sepatu-nobox">Sepatu tanpa Box</option>
                </select>
            </div>
            <div id="jastip-details-container"></div>
            <div class="form-group">
                <label for="prefecture-search">Dikirim ke perfektur mana?</label>
                <div class="dropdown">
                    <input type="text" id="prefecture-search" name="prefecture" placeholder="Cari perfektur..." autocomplete="off" required>
                    <div id="prefecture-dropdown" class="dropdown-content"></div>
                </div>
            </div>
            <div class="form-group">
                <label for="ongkir">Biaya Dasar Ongkir</label>
                <input type="text" id="ongkir" name="ongkir" readonly placeholder="Biaya ongkir akan muncul disini">
            </div>
            <button type="button" class="calculate-btn">Hitung Total Biaya</button>
        `;

        const shippingCostsCalc = { 'hokkaido': 1060, 'aomori': 1060, 'akita': 1060, 'iwate': 1060, 'miyagi': 940, 'yamagata': 940, 'fukushima': 940, 'tokyo': 940, 'ibaraki': 940, 'tochigi': 940, 'gunma': 940, 'saitama': 940, 'chiba': 940, 'kanagawa': 940, 'yamanashi': 940, 'nagano': 940, 'niigata': 940, 'toyama': 940, 'ishikawa': 940, 'fukui': 940, 'shizuoka': 940, 'aichi': 940, 'gifu': 940, 'mie': 940, 'kyoto': 1060, 'shiga': 1060, 'nara': 1060, 'wakayama': 1060, 'osaka': 1060, 'hyogo': 1060, 'okayama': 1190, 'hiroshima': 1190, 'yamaguchi': 1190, 'tottori': 1190, 'shimane': 1190, 'kagawa': 1190, 'tokushima': 1190, 'kochi': 1190, 'ehime': 1190, 'fukuoka': 1190, 'saga': 1190, 'nagasaki': 1190, 'kumamoto': 1190, 'oita': 1190, 'miyazaki': 1190, 'kagoshima': 1190, 'okinawa': 1460 };
        const jastipConfigs = {
            'biasa':         { label: 'Berapa KG berat barangmu?',         price: 1500, unit: 'kg',    weightPerUnit: 1 },
            'handphone':     { label: 'Berapa unit?',                      price: 2000, unit: 'unit',  weightPerUnit: 0.5 },
            'laptop':        { label: 'Berapa KG berat laptop/tabletmu?',  price: 1500, unit: 'kg',    weightPerUnit: 1 },
            'rokok':         { label: 'Berapa slop?',                      price: 2000, unit: 'slop',  weightPerUnit: 0.3 },
            'rokok-elektrik':{ label: 'Berapa unit?',                      price: 1000, unit: 'unit',  weightPerUnit: 0.4 },
            'liquid':        { label: 'Berapa unit?',                      price: 500,  unit: 'unit',  weightPerUnit: 0.2 },
            'sepatu-box':    { label: 'Berapa pasang?',                    price: 2000, unit: 'pasang',weightPerUnit: 1.2 },
            'sepatu-nobox':  { label: 'Berapa pasang?',                    price: 1500, unit: 'pasang',weightPerUnit: 0.8 }
        };
        const prefecturesCalc = Object.keys(shippingCostsCalc);

        const prefectureSearchInputCalc = document.getElementById('prefecture-search');
        const prefectureDropdownCalc = document.getElementById('prefecture-dropdown');
        const ongkirInputCalc = document.getElementById('ongkir');
        const resultModalCalc = document.getElementById('result-modal');
        const imageViewerCalc = document.getElementById('image-viewer');
        const zoomedImageCalc = document.getElementById('zoomed-image');
        const itemTypeSelectCalc = document.getElementById('item-type');
        const jastipDetailsContainerCalc = document.getElementById('jastip-details-container');

        function updateJastipInput() {
            const selectedType = itemTypeSelectCalc.value;
            const config = jastipConfigs[selectedType];
            if (config) {
                jastipDetailsContainerCalc.innerHTML = `<div class="form-group"><label for="jastip-quantity">${config.label}</label><input type="tel" id="jastip-quantity" name="jastip-quantity" placeholder="Contoh: 1" min="0" required></div>`;
            } else {
                jastipDetailsContainerCalc.innerHTML = '';
            }
        }
        itemTypeSelectCalc.addEventListener('change', updateJastipInput);

        function populateDropdown(filter = '') {
            prefectureDropdownCalc.innerHTML = '';
            prefecturesCalc.filter(p => p.toLowerCase().includes(filter.toLowerCase())).forEach(pref => {
                const a = document.createElement('a');
                a.href = '#';
                a.textContent = pref.charAt(0).toUpperCase() + pref.slice(1);
                a.onclick = (e) => { e.preventDefault(); selectPrefecture(pref); };
                prefectureDropdownCalc.appendChild(a);
            });
        }
        
        prefectureSearchInputCalc.addEventListener('keyup', () => { populateDropdown(prefectureSearchInputCalc.value); prefectureDropdownCalc.style.display = 'block'; });
        prefectureSearchInputCalc.addEventListener('focus', () => { populateDropdown(prefectureSearchInputCalc.value); prefectureDropdownCalc.style.display = 'block'; });
        document.addEventListener('click', (e) => { if (!e.target.closest('.dropdown')) { prefectureDropdownCalc.style.display = 'none'; } });

        function selectPrefecture(prefecture) {
            prefectureSearchInputCalc.value = prefecture.charAt(0).toUpperCase() + prefecture.slice(1);
            prefectureDropdownCalc.style.display = 'none';
            const cost = shippingCostsCalc[prefecture.toLowerCase()];
            if (cost) { ongkirInputCalc.value = formatRupiah(cost); }
        }
        
        function formatRupiah(number) { return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0 }).format(number).replace('JPY', 'Â¥'); }

        function calculateTotal() {
            const prefecture = prefectureSearchInputCalc.value.toLowerCase();
            const baseOngkir = shippingCostsCalc[prefecture];
            const selectedType = itemTypeSelectCalc.value;
            const jastipQuantityInput = document.getElementById('jastip-quantity');
            
            if (!selectedType || !jastipQuantityInput) { alert('Mohon pilih jenis barang terlebih dahulu.'); return; }
            
            const jastipQuantity = parseFloat(jastipQuantityInput.value);
            if (isNaN(baseOngkir) || isNaN(jastipQuantity) || jastipQuantity <= 0) { alert('Mohon isi semua kolom (jenis barang, jumlah/berat, dan perfektur) dengan benar.'); return; }

            const config = jastipConfigs[selectedType];
            const hargaJastip = jastipQuantity * config.price;
            const estimatedWeight = jastipQuantity * config.weightPerUnit;
            const multiplier = Math.ceil(estimatedWeight / 30);
            const finalOngkir = baseOngkir * multiplier;
            const totalBiaya = hargaJastip + finalOngkir;

            document.getElementById('harga-jastip-result').textContent = formatRupiah(hargaJastip);
            document.getElementById('biaya-ongkir-result').textContent = formatRupiah(finalOngkir);
            document.getElementById('total-biaya-result').textContent = formatRupiah(totalBiaya);

            document.getElementById('calculator-modal-form').classList.remove('visible');
            resultModalCalc.classList.add('visible');
        }

        jastipForm.querySelector('.calculate-btn').addEventListener('click', calculateTotal);

        document.getElementById('box-image').addEventListener('click', (e) => {
             zoomedImageCalc.src = e.target.src;
             imageViewerCalc.classList.add('visible');
        });
        imageViewerCalc.addEventListener('click', () => {
             imageViewerCalc.classList.remove('visible');
        });
        
        // --- <<<<<<<<<<<<<<<<<<<< END: CALCULATOR LOGIC INTEGRATION >>>>>>>>>>>>>>>>>>>> ---

        
        /**************************************************/
        /* -- MULAI: SEMUA LOGIKA GAME DIPINDAHKAN KE SINI -- */
        /**************************************************/

        // --- Elemen UI Game ---
        const gameModal = document.getElementById('game-modal');
        const openGameBtn = document.getElementById('open-game-btn');
        const gameCanvas = document.getElementById('gameCanvas');
        const gameCtx = gameCanvas.getContext('2d');
        const gameDropButton = document.getElementById('drop-button');
        const gameStartScreen = document.getElementById('start-screen');
        const gameOverScreen = document.getElementById('game-over-screen');
        const gameStartButton = document.getElementById('start-game-btn');
        const gameRestartButton = document.getElementById('restart-game-btn');
        const gameScoreDisplay = document.getElementById('score-display');
        const gameFinalScoreDisplay = document.getElementById('final-score');
        
        let gameInitialized = false;

        openGameBtn.addEventListener('click', () => {
            gameModal.classList.add('visible');
            if (!gameInitialized) {
                gameStartButton.textContent = "Memuat Aset...";
                gameStartButton.disabled = true;
                loadGameImages(() => {
                    gameStartButton.textContent = "Mulai Game";
                    gameStartButton.disabled = false;
                });
            }
        });

        gameModal.addEventListener('click', (event) => {
            if (event.target === gameModal) {
                gameModal.classList.remove('visible');
                if (gameAnimationFrameId) cancelAnimationFrame(gameAnimationFrameId);
            }
        });
        
        // --- Pengaturan Game ---
        const GAME_COLS = 4;
        let GAME_ROWS, GAME_BLOCK_SIZE;
        const GAME_ITEMS = { EMPTY: 0, BOX: 1, KOPER: 2, PESAWAT: 3 };

        function setGameCanvasDimensions() {
            const wrapper = document.getElementById('canvas-wrapper');
            gameCanvas.width = wrapper.offsetWidth;
            gameCanvas.height = wrapper.offsetHeight;
            GAME_BLOCK_SIZE = gameCanvas.width / GAME_COLS;
            GAME_ROWS = Math.floor(gameCanvas.height / GAME_BLOCK_SIZE);
        }

        const GAME_ITEM_PROPS = {
            [GAME_ITEMS.BOX]:     { src: 'https://yanoshijapan.github.io/asetonline/dus.png', img: null },
            [GAME_ITEMS.KOPER]:   { src: 'https://yanoshijapan.github.io/asetonline/ckoper.png', img: null },
            [GAME_ITEMS.PESAWAT]: { src: 'https://yanoshijapan.github.io/asetonline/pesawat.png', img: null }
        };

        function loadGameImages(callback) {
            const totalImages = Object.keys(GAME_ITEM_PROPS).length;
            let loadedCount = 0;
            const onImageLoadOrError = () => {
                loadedCount++;
                if (loadedCount === totalImages) {
                    callback();
                }
            };
            for(const key in GAME_ITEM_PROPS) {
                const item = GAME_ITEM_PROPS[key];
                item.img = new Image();
                item.img.crossOrigin = "Anonymous";
                item.img.src = item.src;
                item.img.onload = onImageLoadOrError;
                item.img.onerror = () => {
                    console.error(`Gagal memuat gambar game: ${item.src}.`);
                    onImageLoadOrError();
                };
            }
        }
        
        // --- Variabel Status Game ---
        let gameGrid, gameCurrentItem, gameScore, isGameGameOver, isGameDropping;
        let gameAnimationFrameId;
        let gameFloatingScores = [];

        class GameItem {
            constructor(type, x, y) { this.type = type; this.x = x; this.y = y; }
        }
        
        function initGame() {
            // --- PERBAIKAN: Tandai game sudah diinisialisasi DI SINI ---
            gameInitialized = true;
            setGameCanvasDimensions();
            gameGrid = Array.from({ length: GAME_ROWS }, () => Array(GAME_COLS).fill(GAME_ITEMS.EMPTY));
            gameScore = 0; isGameGameOver = false; isGameDropping = false;
            gameFloatingScores = [];
            gameScoreDisplay.textContent = gameScore;
            gameDropButton.disabled = false;
            // Pastikan game over screen disembunyikan saat mulai
            gameOverScreen.classList.add('hidden');
            spawnNewGameItem();
            if (gameAnimationFrameId) cancelAnimationFrame(gameAnimationFrameId);
            gameLoop();
        }

        function spawnNewGameItem() {
            const randomType = Math.floor(Math.random() * 3) + 1;
            gameCurrentItem = new GameItem(randomType, Math.floor(GAME_COLS / 2), 0);
            if (checkGameCollision(gameCurrentItem.x, gameCurrentItem.y)) isGameGameOver = true;
        }
        
        function drawGame() {
            gameCtx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
            gameCtx.strokeStyle = '#dc3545'; gameCtx.lineWidth = 3;
            gameCtx.beginPath(); gameCtx.moveTo(0, GAME_BLOCK_SIZE); gameCtx.lineTo(gameCanvas.width, GAME_BLOCK_SIZE); gameCtx.stroke();
            for (let r = 0; r < GAME_ROWS; r++) {
                for (let c = 0; c < GAME_COLS; c++) {
                    if (gameGrid[r][c] !== GAME_ITEMS.EMPTY) drawGameBlock(c, r, gameGrid[r][c]);
                }
            }
            if (gameCurrentItem && !isGameGameOver) drawGameBlock(gameCurrentItem.x, gameCurrentItem.y, gameCurrentItem.type);
            handleGameFloatingScores();
        }
        
        function handleGameFloatingScores() {
            for (let i = gameFloatingScores.length - 1; i >= 0; i--) {
                const fs = gameFloatingScores[i];
                fs.y -= 0.5; fs.lifetime--; fs.alpha = fs.lifetime / 60;
                gameCtx.font = `bold ${GAME_BLOCK_SIZE * 0.5}px Arial`;
                gameCtx.fillStyle = `rgba(76, 175, 80, ${fs.alpha})`;
                gameCtx.textAlign = 'center';
                gameCtx.fillText(fs.text, fs.x, fs.y);
                if (fs.lifetime <= 0) {
                    gameFloatingScores.splice(i, 1);
                }
            }
        }

        function drawGameBlock(x, y, type) {
            const props = GAME_ITEM_PROPS[type];
            if (props && props.img && props.img.complete && props.img.naturalHeight !== 0) {
                gameCtx.drawImage(props.img, x * GAME_BLOCK_SIZE, y * GAME_BLOCK_SIZE, GAME_BLOCK_SIZE, GAME_BLOCK_SIZE);
            } else {
                gameCtx.fillStyle = '#ccc';
                gameCtx.fillRect(x * GAME_BLOCK_SIZE, y * GAME_BLOCK_SIZE, GAME_BLOCK_SIZE - 1, GAME_BLOCK_SIZE - 1);
            }
        }
        
        function dropGameItem() {
            if (isGameDropping || isGameGameOver || !gameCurrentItem) return;
            isGameDropping = true;
            gameDropButton.disabled = true;
            let dropAnimationFrame;
            let currentPixelY = gameCurrentItem.y * GAME_BLOCK_SIZE;
            const dropSpeed = GAME_BLOCK_SIZE / 2; 

            function animateDrop() {
                if (gameAnimationFrameId) cancelAnimationFrame(gameAnimationFrameId);
                currentPixelY += dropSpeed;
                const nextGridY = Math.floor((currentPixelY + GAME_BLOCK_SIZE - 1) / GAME_BLOCK_SIZE);
                if (checkGameCollision(gameCurrentItem.x, nextGridY)) {
                    gameCurrentItem.y = nextGridY - 1;
                    solidifyGameItem();
                    checkGameMerges();
                    spawnNewGameItem();
                    isGameDropping = false;
                    gameDropButton.disabled = isGameGameOver;
                    cancelAnimationFrame(dropAnimationFrame);
                    gameLoop(); 
                    return;
                }
                gameCurrentItem.y = currentPixelY / GAME_BLOCK_SIZE;
                drawGame();
                dropAnimationFrame = requestAnimationFrame(animateDrop);
            }
            animateDrop();
        }

        function gameLoop() {
            if(isGameDropping) return;
            if (!isGameGameOver) {
                drawGame();
                gameAnimationFrameId = requestAnimationFrame(gameLoop);
            } else {
                showGameGameOver();
            }
        }

        function showGameGameOver() {
            gameFinalScoreDisplay.textContent = gameScore;
            gameOverScreen.classList.remove('hidden');
            gameDropButton.disabled = true;
        }

        function checkGameCollision(x, y) {
            if (x < 0 || x >= GAME_COLS || y >= GAME_ROWS) return true;
            return gameGrid[y] && gameGrid[y][x] !== GAME_ITEMS.EMPTY;
        }

        function solidifyGameItem() {
            gameCurrentItem.y = Math.round(gameCurrentItem.y);
            if (gameCurrentItem.y < GAME_ROWS) gameGrid[gameCurrentItem.y][gameCurrentItem.x] = gameCurrentItem.type;
            if (gameCurrentItem.y < 1) isGameGameOver = true;
        }

        function checkGameMerges() {
            for (let r = GAME_ROWS - 1; r > 0; r--) {
                for (let c = 0; c < GAME_COLS; c++) {
                    const currentType = gameGrid[r][c];
                    const aboveType = gameGrid[r - 1][c];
                    let merged = false;
                    let points = 0;

                    if (currentType !== GAME_ITEMS.EMPTY && currentType === aboveType) {
                        if (currentType === GAME_ITEMS.BOX) {
                            gameGrid[r][c] = GAME_ITEMS.KOPER; points = 5; merged = true;
                        } else if (currentType === GAME_ITEMS.KOPER) {
                            gameGrid[r][c] = GAME_ITEMS.PESAWAT; points = 10; merged = true;
                        } else if (currentType === GAME_ITEMS.PESAWAT) {
                            points = 25;
                            for (let row = r; row > 1; row--) { gameGrid[row][c] = gameGrid[row - 2] ? gameGrid[row - 2][c] : GAME_ITEMS.EMPTY; }
                            gameGrid[0][c] = GAME_ITEMS.EMPTY; gameGrid[1][c] = GAME_ITEMS.EMPTY; merged = true;
                        }

                        if (merged) {
                            gameScore += points;
                            gameFloatingScores.push({
                                text: `+${points}`,
                                x: (c + 0.5) * GAME_BLOCK_SIZE,
                                y: r * GAME_BLOCK_SIZE,
                                lifetime: 60,
                                alpha: 1.0
                            });

                            if (currentType !== GAME_ITEMS.PESAWAT) {
                                for (let row = r - 1; row > 0; row--) { gameGrid[row][c] = gameGrid[row - 1][c]; }
                                gameGrid[0][c] = GAME_ITEMS.EMPTY;
                            }
                            gameScoreDisplay.textContent = gameScore; 
                            return checkGameMerges();
                        }
                    }
                }
            }
        }
        
        function handleGameMove(event) {
            if (!gameCurrentItem || isGameGameOver || isGameDropping) return;
            const rect = gameCanvas.getBoundingClientRect();
            const clientX = event.touches ? event.touches[0].clientX : event.clientX;
            const x = clientX - rect.left;
            let newCol = Math.floor(x / GAME_BLOCK_SIZE);
            newCol = Math.max(0, Math.min(GAME_COLS - 1, newCol));
            if (!checkGameCollision(newCol, gameCurrentItem.y)) gameCurrentItem.x = newCol;
        }
        gameCanvas.addEventListener('mousedown', (e) => handleGameMove(e));
        gameCanvas.addEventListener('mousemove', (e) => { if(e.buttons === 1) handleGameMove(e); });
        gameCanvas.addEventListener('touchstart', (e) => { e.preventDefault(); handleGameMove(e); }, { passive: false });
        gameCanvas.addEventListener('touchmove', (e) => { e.preventDefault(); handleGameMove(e); }, { passive: false });
        
        gameStartButton.addEventListener('click', () => {
            gameStartScreen.classList.add('hidden');
            requestAnimationFrame(() => {
                initGame();
            });
        });

        gameDropButton.addEventListener('click', dropGameItem);
        gameRestartButton.addEventListener('click', () => {
            gameOverScreen.classList.add('hidden');
            initGame();
        });

        window.addEventListener('resize', () => {
            if(gameInitialized && gameModal.classList.contains('visible')) {
                initGame();
            }
        });
        
    });
  
    </script>
</body>
</html>


